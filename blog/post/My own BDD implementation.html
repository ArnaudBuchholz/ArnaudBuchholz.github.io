<script language="javascript" src="../include.js"></script>
<div class="post">
<h3 class="post-title entry-title">
    My own BDD implementation
</h3>
<div class="post-header">
    <div class="post-header-line-1"></div>
</div>
<div class="post-body">
<!-- Copy from the next line -->
<div class="summary">
    <img src="http://ArnaudBuchholz.github.io/blog/student.png" align="left">
    I consider myself as curious and I am always eager to understand / learn how things are working. 
    For the gpf-js library, I wanted to follow TDD practice.
    However, tools such as mocha / jasmine were not existing for cscript.
    Hence, I had to develop my own.
</div>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Javascript and development",
    "author": {
        "@type": "Person",
        "name": "Arnaud Buchholz",
        "image": "https://en.gravatar.com/userimage/57789459/524bdffdc1fa6e86619b548c2ed70cac.jpg",
        "url": "http://gpf-js.blogspot.ca/"
    },
    "headline": "My own BDD implementation",
    "url": "http://gpf-js.blogspot.ca/sneaky-javascript-technics-ii.html",
    "datePublished": "2015-02-03T04:54:00.000Z",
    "dateModified": "2015-02-03T04:54:00.000Z",
    "description": ""
}
</script>
<code class="markdown">
### What are TDD and BDD?

## Let's talk about test

TDD stands for Test Driven Development: the idea is to write tests first, then write the code that passes the test.

According to [uncle Bob](http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html), the exact steps are:

1. You must write a failing test before you write any production code.
2. You must not write more of a test than is sufficient to fail, or fail to compile.
3. You must not write more production code than is sufficient to make the currently failing test pass.

BDD is just a renaming of TDD to make it more behavior oriented but, in the end, it is still TDD.

## Frameworks

There are lots of framework to implement TDD.
Each one have its own PROs and CONs in terms of:

* Features: testing helpers (asserts, hooks, mockups), integration with existing frameworks (such as AngularJS, ExtJS),
support of automation, support of asynchronous calls
* Implementation: how much effort it takes to implement the framework, how much effort it takes to write tests
* Performance: how much time it takes to run the tests
 
I will not pretend I know them all but, at least, I seriously experimented the following 3:

* [Siesta](https://www.sencha.com/blog/introducing-siesta-a-testing-tool-for-ext-js/): the ExtJS specific testing tool
* [Mocha](https://mochajs.org/): the JavaScript test framework
* [Jasmine](http://jasmine.github.io/): another JavaScript test framework

## Comparing to reality

OK, let's be honest: I did not start the gpf-js library by doing TDD (can you believe it?).
By the time I write this article, I am catching up on a big refactoring that makes me change all of its sources
(I applied very strict JSHint validation rules which broke everything).
Having around 200 tests running, I really see the value of testing !

I see several advantages of having tests:

* Code is always valid: I can quickly detect issues whenever I change some code
* Writing tests is a way to validate an API: indeed, whenever I want to develop a new feature, I first write the code 
in the most elegant manner. I don't even pay attention if it is technically feasible, I first target a natural way of using
it. So, I start by writing tests.
* Tests are like documentation: have you ever checked the documentation of a big API? it is usually full of samples.
Tests provides you free (and valid) samples.

### Writing BDD

## Basics

describe, it, asserts

describe items are hierarchical

## Setting up the contexts

beforeEach, afterEach, before, after

## Asynchronous testing

it function with a done parameter

### Executing BDD

There are mainly three steps

* Load the test files to collect the descriptions
* Executes the tests
* Report on execution

### Implementing BDD

</code>
<!-- Drop those two lines -->
</div>
</div>
