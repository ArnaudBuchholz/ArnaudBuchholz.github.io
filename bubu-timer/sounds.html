<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sound test</title>
    <script>

// https://www.ibm.com/developerworks/library/wa-ioshtml5/
function onGo () {
    var sounds = [{
        label: "meow1",
        from: 0.0,
        to: 1.1
    }, {
        label: "meow2",
        from: 1.3,
        to: 2.4
    }, {
        label: "whine",
        from: 2.7,
        to: 3.5
    }, {
        label: "purr",
        from: 5.0,
        to: 10.0
    }];
    var audio = document.getElementById("sounds");
    audio.loop = true;
    audio.addEventListener('timeupdate', function (e) {
        document.getElementById("audioProperties").innerHTML = ["currentTime", "ended"]
            .map(property => property + ": " + audio[property])
            .join(", ");
        sounds.forEach(sound => {
           if (audio.currentTime >= sound.from && audio.currentTime < sound.to) {
               document.getElementById("current").innerHTML = sound.label;
           }
        });
//        const sound = sounds[current];
//        if (sound) {
//            if (audio.currentTime < sound.from) {
//                audio.currentTime = sound.from;
//            } else if (audio.currentTime >= sound.to) {
//                current = 0;
//                audio.currentTime = 0;
//            }
//        }
    });
    audio.play();
    setTimeout(function () {
        current = 3;
        audio.currentTime = sounds[current].from;
    }, 1000)
}

    </script>
</head>
<body>
    <input type="button" value="Go!" onclick="onGo()">
    <span id="current"></span> : <span id="audioProperties"></span>
    <audio id="sounds" preload="none">
        <source src="cat.m4a" type="audio/mpeg" />
        <source src="cat.ogg" type="audio/ogg" />
    </audio>
</body>
</html>
