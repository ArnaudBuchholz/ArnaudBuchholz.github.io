<html>
    <head>
        <meta charset="utf-8">
        <title>chrome-extension-url-mapper</title>
        <script language="JavaScript" src="jquery-2.2.0.min.js"></script>
        <script language="JavaScript" src="index.js"></script>
        <script language="JavaScript">

function on$Ajax () {
    $.ajax("index.json?jquery", {
        dataType: "json",
        complete: function (xhr, textStatus) {
            alert(textStatus);
        }
    });
}

function createCORSRequest(method, url) {
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr) {
        // XHR for Chrome/Firefox/Opera/Safari.
        xhr.open(method, url, true);
    } else if (typeof XDomainRequest != "undefined") {
        // XDomainRequest for IE.
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
        // CORS not supported.
        xhr = null;
    }
    return xhr;
}

function onXHR () {
    // Chrome extension runs... in Chrome
    var xhr = createCORSRequest("GET", "index.json?xhr");
    xhr.onreadystatechange = function() {
        if (4 === xhr.readyState) {
            alert(xhr.statusText);
        }
    };
    xhr.send();
}

        </script>
    </head>
    <body>
        <img src="thumbs-up.png">
        <script language="JavaScript">
            injectCode();
        </script>
        <button onclick="on$Ajax()">$.ajax test</button>
        <button onclick="onXHR()">XMLHttpRequest test</button>
    </body>
</html>
