<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>GPF Library Tutorial: Entity definition</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">GPF Library</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="gpf.html">gpf</a></li><li><a href="gpf.attributes.html">gpf.attributes</a></li><li><a href="gpf.fs.html">gpf.fs</a></li><li><a href="gpf.http.html">gpf.http</a></li><li><a href="gpf.interfaces.html">gpf.interfaces</a></li><li><a href="gpf.java.html">gpf.java</a></li><li><a href="gpf.node.html">gpf.node</a></li><li><a href="gpf.path.html">gpf.path</a></li><li><a href="gpf.require.html">gpf.require</a></li><li><a href="gpf.rhino.html">gpf.rhino</a></li><li><a href="gpf.stream.html">gpf.stream</a></li><li><a href="gpf.stream.csv.html">gpf.stream.csv</a></li><li><a href="gpf.typedef.html">gpf.typedef</a></li><li><a href="gpf.web.html">gpf.web</a></li><li><a href="gpf.wscript.html">gpf.wscript</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="gpf.attributes.Attribute.html">gpf.attributes.Attribute</a></li><li><a href="gpf.Error.html">gpf.Error</a></li><li><a href="gpf.Error.AbstractMethod.html">gpf.Error.AbstractMethod</a></li><li><a href="gpf.Error.AssertionFailed.html">gpf.Error.AssertionFailed</a></li><li><a href="gpf.Error.IncompatibleStream.html">gpf.Error.IncompatibleStream</a></li><li><a href="gpf.Error.InterfaceExpected.html">gpf.Error.InterfaceExpected</a></li><li><a href="gpf.Error.InvalidCSV.html">gpf.Error.InvalidCSV</a></li><li><a href="gpf.Error.InvalidParameter.html">gpf.Error.InvalidParameter</a></li><li><a href="gpf.Error.InvalidRequireConfigureOption.html">gpf.Error.InvalidRequireConfigureOption</a></li><li><a href="gpf.Error.InvalidStreamState.html">gpf.Error.InvalidStreamState</a></li><li><a href="gpf.Error.NotImplemented.html">gpf.Error.NotImplemented</a></li><li><a href="gpf.Error.ReadInProgress.html">gpf.Error.ReadInProgress</a></li><li><a href="gpf.Error.UnreachablePath.html">gpf.Error.UnreachablePath</a></li><li><a href="gpf.Error.WriteInProgress.html">gpf.Error.WriteInProgress</a></li><li><a href="gpf.java.BaseStream.html">gpf.java.BaseStream</a></li><li><a href="gpf.java.ReadableStream.html">gpf.java.ReadableStream</a></li><li><a href="gpf.java.WritableStream.html">gpf.java.WritableStream</a></li><li><a href="gpf.node.BaseStream.html">gpf.node.BaseStream</a></li><li><a href="gpf.node.ReadableStream.html">gpf.node.ReadableStream</a></li><li><a href="gpf.node.WritableStream.html">gpf.node.WritableStream</a></li><li><a href="gpf.stream.AbstractOperator.html">gpf.stream.AbstractOperator</a></li><li><a href="gpf.stream.BufferedRead.html">gpf.stream.BufferedRead</a></li><li><a href="gpf.stream.csv.Parser.html">gpf.stream.csv.Parser</a></li><li><a href="gpf.stream.Filter.html">gpf.stream.Filter</a></li><li><a href="gpf.stream.LineAdapter.html">gpf.stream.LineAdapter</a></li><li><a href="gpf.stream.Map.html">gpf.stream.Map</a></li><li><a href="gpf.stream.ReadableArray.html">gpf.stream.ReadableArray</a></li><li><a href="gpf.stream.ReadableString.html">gpf.stream.ReadableString</a></li><li><a href="gpf.stream.WritableArray.html">gpf.stream.WritableArray</a></li><li><a href="gpf.stream.WritableString.html">gpf.stream.WritableString</a></li><li><a href="gpf.typedef.Tag.html">gpf.typedef.Tag</a></li><li><a href="gpf.wscript.BaseStream.html">gpf.wscript.BaseStream</a></li><li><a href="gpf.wscript.ReadableStream.html">gpf.wscript.ReadableStream</a></li><li><a href="gpf.wscript.WritableStream.html">gpf.wscript.WritableStream</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="interfaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Interfaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="gpf.interfaces.IEnumerator.html">gpf.interfaces.IEnumerator</a></li><li><a href="gpf.interfaces.IFileStorage.html">gpf.interfaces.IFileStorage</a></li><li><a href="gpf.interfaces.IFlushableStream.html">gpf.interfaces.IFlushableStream</a></li><li><a href="gpf.interfaces.IReadableStream.html">gpf.interfaces.IReadableStream</a></li><li><a href="gpf.interfaces.IThenable.html">gpf.interfaces.IThenable</a></li><li><a href="gpf.interfaces.IUnknown.html">gpf.interfaces.IUnknown</a></li><li><a href="gpf.interfaces.IWritableStream.html">gpf.interfaces.IWritableStream</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-CODESTYLE.html">Code style</a></li><li><a href="tutorial-COMPATIBILITY.html">Compatibility layer</a></li><li><a href="tutorial-COVERAGE.html">Code coverage exceptions</a></li><li><a href="tutorial-DEFINE.html">Entity definition</a></li><li><a href="tutorial-INTERFACES.html">Standard interfaces</a></li><li><a href="tutorial-LOADING.html">Loading GPF Library</a></li><li><a href="tutorial-REQUIRE.html">Modularization</a></li><li><a href="tutorial-TESTME.html">Library testing</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			<section class="tutorial-section">

<header>
    

    <h2>Entity definition</h2>
</header>

<article>
    <p>The library offers one entry point to define entities: <a href="gpf.html#.define">gpf.define</a>.
It takes only one parameter: a definition dictionary that describes the entity to create.</p>
<p>The primary goal of this mechanism is to simplify the description (and generation) of custom entities such as classes,
interfaces and attributes. While the library evolves, it will take advantage of the most recent JavaScript features
(depending on the host) to implement those entities without fundamentally change the way they are described.</p>
<h2>$ properties</h2><p>The structure of the definition dictionary depends on the entity to create.
However, some special properties are globally defined in order to provide general or entity-specific information.
They are always introduced with the character $.</p>
<p>Properties that are common to all entity types:</p>
<ul>
<li><code>$type</code>: <strong>(required)</strong> Entity type (for instance: <code>&quot;class&quot;</code>)</li>
<li><code>$name</code>: <strong>(required)</strong> Entity name (for instance: <code>&quot;Sample&quot;</code>),
it may contain namespace information (for instance: <code>&quot;tutorial.Sample&quot;</code>)</li>
<li><code>$namespace</code>: <strong>(optional)</strong> When specified, the resulting entity constructor is defined to the corresponding object.
For instance: <code>$namespace: &quot;test.doc&quot;, $name: &quot;tutorial.Sample&quot;</code> will make the entity constructor to be set into
<code>test.doc.tutorial.Sample</code>. Validation regexp is: <code>^(:?[a-z_$][a-zA-Z0-9]+(:?\.[a-z_$][a-zA-Z0-9]+)*)?$</code>.</li>
</ul>
<p>This also means that any property starting with the $ sign will be treated as a special one and may generate validation
errors if not supported by the entity type.</p>
<h2>Class</h2><p>The class entity is based on <a href="https://en.wikipedia.org/wiki/Class_%28computer_programming%29">class concepts</a></p>
<ul>
<li><code>$type</code>: <code>&quot;class&quot;</code></li>
<li><code>$name</code>: <strong>(required)</strong> Class name (must start with an uppercase letter, $ or <em>,
validation regexp is `/^[A-Z</em>$][a-zA-Z0-9]*$/`)</li>
<li><code>$class</code>: Shortcut to synthesize <code>$type</code>, <code>$name</code> and <code>$namespace</code></li>
<li><code>$extend</code>: Indicates the class to inherit from, it can be either a Class handler (JavaScript function) or a string
giving the contextual path to the Class handler (through <a href="gpf.html#.context">gpf.context</a>).</li>
</ul>
<p>For instance:</p>
<pre class="prettyprint source lang-javascript"><code>var test = {};
var ResultClass = gpf.define({
    $class: &quot;test.EmptyClass&quot;
});
assert(ResultClass === test.EmptyClass);
var instance = new test.EmptyClass();</code></pre><p>is equivalent to:</p>
<pre class="prettyprint source lang-javascript"><code>var test = {};
var ResultClass = gpf.define({
    $type: &quot;class&quot;,
    $name: &quot;EmptyClass&quot;,
    $namespace: &quot;test&quot;
});
assert(ResultClass === test.EmptyClass);
var instance = new test.EmptyClass();</code></pre><h3>Members</h3><p>Provided you respect the expected member names (validation regexp is <code>^[a-z_][a-zA-Z0-9]*$</code>)
and you don't use any reserved member names (see below), you may define almost any member you
want.</p>
<p>It is recommended to define both methods and members in the class definition.
Even if you can declare add members within the constructor (or by manipulating instances
once created), making them known in the entity definition structure will allow latter
optimizations.</p>
<p>The same way, the library extensively uses the _ character to indicate private member names.</p>
<h3>Reserved member names</h3><p>The following member names are prohibited:</p>
<ul>
<li>super</li>
<li>class</li>
<li>public</li>
<li>private</li>
<li>protected</li>
<li>static</li>
<li>mixin</li>
</ul>
<h3>Constructor</h3><p>In order to customize how a new object is created, you may add to the definition dictionary a constructor property
associated to a method.</p>
<p>For instance:</p>
<pre class="prettyprint source lang-javascript"><code>var A = gpf.define({
    $class: &quot;A&quot;,
    _member: &quot;defaultValue&quot;,
    getMember: function () {
        return this._member;
    },
    constructor: function (memberValue) {
        if (memberValue) {
            this._member = memberValue;
        }
    }
});</code></pre><p>Several things to consider:</p>
<ul>
<li>This property must be quoted on some hosts (such as WScript)</li>
<li>All instances owns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/
Global_Objects/Object/constructor">constructor property</a> that <strong>is not</strong> the one set in the definition dictionary.</li>
<li>The constructor function returned by gpf.define is secured so that you must use it with
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new">new</a></li>
</ul>
<h3>Inheritance</h3><p>Class inheritance relies on
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">prototype inheritance</a>.</p>
<p>Inherited constructor is not called implicitely.</p>
<h3>this.$super</h3><p>When <a href="https://en.wikipedia.org/wiki/Method_overriding">overriding</a> a method, the parent one is available through the
method <code>this.$super()</code>. This method is bound dynamically, meaning that if you modify the super method
by changing the implementation (altering the prototype), $super will always point to the right one.</p>
<p>If you need to access another parent, you may use the syntax <code>this.$super.methodName()</code>.</p>
<p>For instance:</p>
<pre class="prettyprint source lang-javascript"><code>gpf.define({
    $class: &quot;B&quot;,
    $extend: A,
    &quot;constructor&quot;: function (initialValue) {
        this.$super(initialValue);
    },
    getMember: function () {
        return this.$super() + &quot;-inB&quot;;
    },
    getUppercasedMember: function () {
        return this.$super.getMember().toUpperCase();
    },
    setMember: function (newValue) {
        this._member = newValue;
    }
});</code></pre><p>Unlike <code>super</code>, <code>this.$super</code> and <code>this.$super.methodName</code> function objects are not equal to the parent ones. Yet they
can be invoked with any given context.</p>
<h3>Supported features</h3><ul>
<li>Because of the way inheritance is implemented, you may define classes with any valid JavaScript class.</li>
<li><code>constructor</code> property is set to the class constructor</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof"><code>instanceof</code></a> is supported</li>
</ul>
<h2>Interface</h2><p>The class entity is based on <a href="https://en.wikipedia.org/wiki/Public_interface">interface concept</a></p>
<ul>
<li><code>$type</code>: <code>&quot;interface&quot;</code></li>
<li><code>$name</code>: <strong>(required)</strong> Interface name (must start with an uppercase I, validation regexp is <code>/^I[a-zA-Z0-9]*$/</code>)</li>
<li><code>$interface</code>: Shortcut to synthesize <code>$type</code>, <code>$name</code> and <code>$namespace</code></li>
</ul>
<p>For instance:</p>
<pre class="prettyprint source lang-javascript"><code>var ISerializable = gpf.define({
    $interface: &quot;ISerializable&quot;,

    serialize: function (stream) {}
});

var obj = {
    serialize: function (stream) {
    }
};

assert(gpf.interfaces.isImplementedBy(ISerializable, obj));</code></pre><h3>Members</h3><p>The goal of an interface is to establish a <a href="https://en.wikipedia.org/wiki/Design_by_contract">contract of service</a>
between the object implementing the interface and the consumer. Only methods are allowed.
Because an interface exposes only 'public' methods, names must respect the validation regexp
<code>^[a-z][a-zA-Z0-9]*$</code>.</p>
<h3>Reserved member names</h3><p>The following member names are prohibited:</p>
<ul>
<li>super</li>
<li>class</li>
<li>public</li>
<li>private</li>
<li>protected</li>
<li>static</li>
<li>mixin</li>
<li>constructor</li>
</ul>
<h3>Constructor</h3><p>An interface can't be instantiated, hence no constructor is allowed.</p>
<h3>Supported features</h3><p>Interfaces are leveraged through these two APIs:</p>
<ul>
<li><a href="gpf.interfaces.html#.isImplementedBy">gpf.interfaces.isImplementedBy</a> to check if an object implements a given interface</li>
<li><a href="gpf.interfaces.html#.query">gpf.interfaces.query</a> to query a specific interface either because it implements it or
because it implements the <a href="gpf.interfaces.IUnknown.html">gpf.interfaces.IUnknown</a> interface.</li>
</ul>
<h2>Attributes</h2><h3>Concept</h3><p>Attributes are used to qualify members of a class definition.
The mechanism is comparable to <a href="https://en.wikipedia.org/wiki/Java_annotation">Java annotations</a>.</p>
<h3>Definition</h3><p><strong>Every member</strong> of a class, whatever its type, can own attributes.</p>
<p>The attributes of a member can be set either in the class introducing the member or in any of its subclasses.
Attributes are <strong>inherited</strong>.</p>
<p>On the contrary, it is not possible to set attributes on a member that does not exist in the class hierarchy.</p>
<p>Attributes are objects.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer">Literals</a> are not
allowed since instances must be created from <strong>a class that is a child of the <a href="gpf.attributes.Attribute.html">gpf.attributes.Attribute</a> class</strong>.</p>
<p>Attributes are always <strong>set in batch (i.e. using an array)</strong>, even for a single attribute.</p>
<p>To set attributes on a member, a special member must be added to the class definition where the name is the member name
enclosed in square brackets.</p>
<p>In the following example, the member value is assigned one attribute that is an instance of the class MyAttribute:</p>
<pre class="prettyprint source lang-javascript"><code>MyClass = gpf.define({
    $class: &quot;MyClass&quot;,

    &quot;[value]&quot;: [new MyAttribute()],
    value: 0
});</code></pre><p>In the following example, MySubClass will own a second attribute for the member value:</p>
<pre class="prettyprint source lang-javascript"><code>MySubClass = gpf.define({
    $class: &quot;MySubClass&quot;,
    $extend: MyClass,

    &quot;[value]&quot;: [new MySecondAttribute()]
});</code></pre><p>Attributes can also be set at the class level, the $ property $attributes introduces them:</p>
<pre class="prettyprint source lang-javascript"><code>MySecondClass = gpf.define({
    $class: &quot;MySecondClass&quot;,
    $attributes: [new MyClassAttribute()],

    &quot;[value]&quot;: [new MyAttribute()],
    value: 0
});</code></pre><h3>Retrieve Attributes</h3><p>After assigning attributes to a class, the library offers the <a href="gpf.attributes.html#.get">gpf.attributes.get</a> API to
query the class definition or one of its instances. As a result, a dictionary mapping members
to their respective list of attributes is returned.</p>
<p>For instance:</p>
<pre class="prettyprint source lang-javascript"><code>MyClass = gpf.define({
    $class: &quot;MyClass&quot;,

    &quot;[value]&quot;: [new MyAttribute()],
    value: 0
});

console.log(gpf.attributes.get(MyClass));
// outputs: {value: [{}]} where the object is the instance of MyAttribute

console.log(gpf.attributes.get(new MyClass()));
// same output</code></pre>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
	
		on 2018-05-08T22:47:36-04:00
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>